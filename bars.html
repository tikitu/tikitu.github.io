<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.7.0/nv.d3.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.7.0/nv.d3.css">
</head>
<body>

<div id="monthly-chart"><svg></svg></div>

<div id="daily-chart"><svg></svg></div>

<script>
nv.addGraph(function() {
  var chart = nv.models.multiBarChart()
      .x(function(d) { return d[0].getDate() + "/" + (d[0].getMonth() + 1) })    //Specify the data accessors.
      .y(function(d) { return d[1] })
      .staggerLabels(false)    //Too many bars and not enough room? Try staggering labels.
      .tooltips(false)        //Don't show tooltips
      .showControls(false)
      .height(400)
      .width(700)
      ;
  chart.yAxis.tickFormat(d3.format("d"));

  d3.select('#daily-chart svg')
      .datum([{key:"Daily pronks", values:data}])
      .attr("width", 800)
      .attr("height", 500)
      .call(chart);

  nv.utils.windowResize(chart.update);

  return chart;
});

function aggregate_months(data) {
    var monthly_data = [["January", 0], ["February", 0], ["March", 0], ["April", 0]];
    _.each(data, function(datum) {
        var date = datum[0];
        var count = datum[1];
        var month = date.getMonth();
        monthly_data[month][1] += count;
    });
    return monthly_data;
}

nv.addGraph(function() {
  var chart = nv.models.multiBarChart()
      .x(function(d) { return d[0] })    //Specify the data accessors.
      .y(function(d) { return d[1] })
      .staggerLabels(false)    //Too many bars and not enough room? Try staggering labels.
      .tooltips(false)        //Don't show tooltips
      .showControls(false)
      .height(400)
      .width(700)
      ;
  chart.yAxis.tickFormat(d3.format("d"));

  d3.select('#monthly-chart svg')
      .datum([{key:"Monthly pronks", values:aggregate_months(data)}])
      .attr("width", 800)
      .attr("height", 500)
      .call(chart);

  nv.utils.windowResize(chart.update);

  return chart;
});

var data = [
  [new Date(2015, 0, 7), 1],
  [new Date(2015, 0, 8), 1],
  [new Date(2015, 0, 9), 1],
  [new Date(2015, 0, 10), 1],
  [new Date(2015, 0, 11), 1],
  [new Date(2015, 0, 12), 1],
  [new Date(2015, 0, 13), 1],
  [new Date(2015, 0, 14), 1],
  [new Date(2015, 0, 15), 1],
  [new Date(2015, 0, 16), 1],
  [new Date(2015, 0, 17), 1],
  [new Date(2015, 0, 18), 1],
  [new Date(2015, 0, 19), 1],
  [new Date(2015, 0, 20), 1],
  [new Date(2015, 0, 21), 1],
  [new Date(2015, 0, 22), 1],
  [new Date(2015, 0, 23), 1],
  [new Date(2015, 0, 24), 1],
  [new Date(2015, 0, 25), 1],
  [new Date(2015, 0, 26), 1],
  [new Date(2015, 0, 27), 1],
  [new Date(2015, 0, 28), 1],
  [new Date(2015, 0, 29), 1],
  [new Date(2015, 0, 30), 1],
  [new Date(2015, 0, 31), 1],
  [new Date(2015, 1, 1), 1],
  [new Date(2015, 1, 2), 1],
  [new Date(2015, 1, 3), 1],
  [new Date(2015, 1, 4), 1],
  [new Date(2015, 1, 5), 1],
  [new Date(2015, 1, 6), 1],
  [new Date(2015, 1, 7), 1],
  [new Date(2015, 1, 8), 1],
  [new Date(2015, 1, 9), 1],
  [new Date(2015, 1, 10), 1],
  [new Date(2015, 1, 11), 1],
  [new Date(2015, 1, 12), 1],
  [new Date(2015, 1, 13), 1],
  [new Date(2015, 1, 14), 1],
  [new Date(2015, 1, 15), 1],
  [new Date(2015, 1, 16), 1],
  [new Date(2015, 1, 17), 1],
  [new Date(2015, 1, 18), 1],
  [new Date(2015, 1, 19), 1],
  [new Date(2015, 1, 20), 1],
  [new Date(2015, 1, 21), 1],
  [new Date(2015, 1, 22), 1],
  [new Date(2015, 1, 23), 1],
  [new Date(2015, 1, 24), 1],
  [new Date(2015, 1, 25), 1],
  [new Date(2015, 1, 26), 1],
  [new Date(2015, 1, 27), 1],
  [new Date(2015, 1, 28), 1],
  [new Date(2015, 2, 1), 1],
  [new Date(2015, 2, 2), 1],
  [new Date(2015, 2, 3), 1],
  [new Date(2015, 2, 4), 1],
  [new Date(2015, 2, 5), 1],
  [new Date(2015, 2, 6), 1],
  [new Date(2015, 2, 7), 1],
  [new Date(2015, 2, 8), 1],
  [new Date(2015, 2, 9), 1],
  [new Date(2015, 2, 10), 1],
  [new Date(2015, 2, 11), 1],
  [new Date(2015, 2, 12), 1],
  [new Date(2015, 2, 13), 1],
  [new Date(2015, 2, 14), 1],
  [new Date(2015, 2, 15), 1],
  [new Date(2015, 2, 16), 1],
  [new Date(2015, 2, 17), 1],
  [new Date(2015, 2, 18), 1],
  [new Date(2015, 2, 19), 1],
  [new Date(2015, 2, 20), 1],
  [new Date(2015, 2, 21), 1],
  [new Date(2015, 2, 22), 1],
  [new Date(2015, 2, 23), 1],
  [new Date(2015, 2, 24), 1],
  [new Date(2015, 2, 25), 1],
  [new Date(2015, 2, 26), 1],
  [new Date(2015, 2, 27), 1],
  [new Date(2015, 2, 28), 1],
  [new Date(2015, 2, 29), 1],
  [new Date(2015, 2, 30), 1],
  [new Date(2015, 2, 31), 1],
  [new Date(2015, 3, 1), 1],
  [new Date(2015, 3, 2), 1],
  [new Date(2015, 3, 3), 1],
  [new Date(2015, 3, 4), 1],
  [new Date(2015, 3, 5), 1],
  [new Date(2015, 3, 6), 1],
];

</script>

</body>
</html>